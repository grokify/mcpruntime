# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html),
commits follow [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/),
and this changelog is generated by [Structured Changelog](https://github.com/grokify/structured-changelog).

## [Unreleased]

## [v0.3.1] - 2026-01-18

### Highlights

- Security fix for open URL redirect vulnerability in OAuth2 server

### Security

- Close open URL redirect vulnerability in `isValidRedirectURI` - wildcards no longer allow arbitrary redirect URIs ([`edac011`](https://github.com/agentplexus/mcpkit/commit/edac011))

### Fixed

- OAuth2 redirect URI validation now properly parses and validates URIs structurally ([`edac011`](https://github.com/agentplexus/mcpkit/commit/edac011))

## [v0.3.0] - 2026-01-18

### Highlights

- Project renamed to MCPKit under github.com/agentplexus/mcpkit
- Restructured into focused subpackages: `runtime/` and `oauth2/`
- Improved error handling following Go best practices

### Breaking

- Import path changed: update `github.com/grokify/mcpruntime` to `github.com/agentplexus/mcpkit/runtime` ([`298f19b`](https://github.com/agentplexus/mcpkit/commit/298f19b))
- Package name changed: update `mcpruntime.` or `mcpkit.` references to `runtime.` ([`298f19b`](https://github.com/agentplexus/mcpkit/commit/298f19b))
- OAuth2 server import path changed: update `oauth2server` to `github.com/agentplexus/mcpkit/oauth2` ([`298f19b`](https://github.com/agentplexus/mcpkit/commit/298f19b))

### Changed

- Module path changed from `github.com/grokify/mcpruntime` to `github.com/agentplexus/mcpkit` ([`692c7c7`](https://github.com/agentplexus/mcpkit/commit/692c7c7))
- Core runtime code moved to `runtime/` subpackage - import `github.com/agentplexus/mcpkit/runtime` ([`298f19b`](https://github.com/agentplexus/mcpkit/commit/298f19b))
- OAuth2 server moved from `oauth2server/` to `oauth2/` - import `github.com/agentplexus/mcpkit/oauth2` ([`298f19b`](https://github.com/agentplexus/mcpkit/commit/298f19b))
- Package references changed from `mcpkit.` to `runtime.` for runtime types ([`298f19b`](https://github.com/agentplexus/mcpkit/commit/298f19b))

### Fixed

- Error handling for `fmt.Fprintf` in OAuth login error page ([`692c7c7`](https://github.com/agentplexus/mcpkit/commit/692c7c7))
- Error handling for `resp.Body.Close()` in all test files ([`692c7c7`](https://github.com/agentplexus/mcpkit/commit/692c7c7))

## [v0.2.0] - 2026-01-11

### Highlights

- OAuth 2.1 Authorization Code + PKCE support for ChatGPT.com and other MCP clients requiring user authentication
- HTTP server mode with optional ngrok tunnel for public URL exposure
- Bearer token authentication for protecting MCP endpoints

### Added

- `ServeHTTP()` method for HTTP transport with graceful shutdown ([`bb710f5`](https://github.com/agentplexus/mcpkit/commit/bb710f5))
- `NgrokOptions` for automatic ngrok tunnel creation with custom domain support ([`bb710f5`](https://github.com/agentplexus/mcpkit/commit/bb710f5))
- `OAuth2Options` for OAuth 2.1 Authorization Code + PKCE authentication ([`bb710f5`](https://github.com/agentplexus/mcpkit/commit/bb710f5))
- `oauth2server` package implementing RFC 7636 (PKCE), RFC 7591 (DCR), RFC 8414, RFC 9728 ([`bb710f5`](https://github.com/agentplexus/mcpkit/commit/bb710f5))
- Bearer token authentication middleware for protected MCP endpoints ([`bb710f5`](https://github.com/agentplexus/mcpkit/commit/bb710f5))
- `HTTPServerResult` with local and public URLs plus OAuth credentials ([`bb710f5`](https://github.com/agentplexus/mcpkit/commit/bb710f5))
- `OnReady` callback in `HTTPServerOptions` for server lifecycle events ([`bb710f5`](https://github.com/agentplexus/mcpkit/commit/bb710f5))

### Deprecated

- `OAuthOptions` (client_credentials only) in favor of `OAuth2Options` with full OAuth 2.1 PKCE support ([`bb710f5`](https://github.com/agentplexus/mcpkit/commit/bb710f5))

## [v0.1.0] - 2026-01-10

### Highlights

- Library-first MCP runtime: define tools, prompts, and resources once, invoke them directly as Go functions or expose over MCP transports
- Zero JSON-RPC overhead in library mode for unit testing, embedding, and serverless use cases
- Full MCP SDK compatibility with escape hatch for advanced features

### Added

- `Runtime` type wrapping `mcp.Server` with dual execution modes (library and server) ([`1e973a1`](https://github.com/agentplexus/mcpkit/commit/1e973a1))
- `New()` constructor with `Options` for runtime configuration ([`1e973a1`](https://github.com/agentplexus/mcpkit/commit/1e973a1))
- `MCPServer()` escape hatch for advanced MCP SDK access ([`1e973a1`](https://github.com/agentplexus/mcpkit/commit/1e973a1))
- `Implementation()` getter for server identity ([`1e973a1`](https://github.com/agentplexus/mcpkit/commit/1e973a1))
- `AddTool[In, Out]()` generic helper with automatic schema inference ([`f7b0c03`](https://github.com/agentplexus/mcpkit/commit/f7b0c03))
- `AddToolHandler()` low-level tool registration ([`f7b0c03`](https://github.com/agentplexus/mcpkit/commit/f7b0c03))
- `CallTool()` for library-mode direct invocation ([`1e973a1`](https://github.com/agentplexus/mcpkit/commit/1e973a1))
- `RemoveTools()`, `ListTools()`, `HasTool()`, `ToolCount()` tool management methods ([`1e973a1`](https://github.com/agentplexus/mcpkit/commit/1e973a1))
- `AddPrompt()` for prompt registration ([`2f85413`](https://github.com/agentplexus/mcpkit/commit/2f85413))
- `GetPrompt()` for library-mode direct invocation ([`2f85413`](https://github.com/agentplexus/mcpkit/commit/2f85413))
- `RemovePrompts()`, `ListPrompts()`, `HasPrompt()`, `PromptCount()` prompt management methods ([`2f85413`](https://github.com/agentplexus/mcpkit/commit/2f85413))
- `AddResource()` for static resource registration ([`a7e7816`](https://github.com/agentplexus/mcpkit/commit/a7e7816))
- `AddResourceTemplate()` for dynamic URI template resources (server mode only) ([`a7e7816`](https://github.com/agentplexus/mcpkit/commit/a7e7816))
- `ReadResource()` for library-mode direct invocation ([`a7e7816`](https://github.com/agentplexus/mcpkit/commit/a7e7816))
- `RemoveResources()`, `RemoveResourceTemplates()` resource removal methods ([`a7e7816`](https://github.com/agentplexus/mcpkit/commit/a7e7816))
- `ListResources()`, `HasResource()`, `ResourceCount()` resource management methods ([`a7e7816`](https://github.com/agentplexus/mcpkit/commit/a7e7816))
- `ServeStdio()` for stdio transport (subprocess mode) ([`d9ed342`](https://github.com/agentplexus/mcpkit/commit/d9ed342))
- `ServeIO()` for custom IO streams ([`d9ed342`](https://github.com/agentplexus/mcpkit/commit/d9ed342))
- `Serve()` for custom MCP transports ([`d9ed342`](https://github.com/agentplexus/mcpkit/commit/d9ed342))
- `Connect()` for session-based connections ([`d9ed342`](https://github.com/agentplexus/mcpkit/commit/d9ed342))
- `StreamableHTTPHandler()` for HTTP/SSE transport ([`d9ed342`](https://github.com/agentplexus/mcpkit/commit/d9ed342))
- `SSEHandler()` for legacy SSE transport ([`d9ed342`](https://github.com/agentplexus/mcpkit/commit/d9ed342))
- `InMemorySession()` for testing with full MCP semantics ([`d9ed342`](https://github.com/agentplexus/mcpkit/commit/d9ed342))

### Documentation

- Comprehensive README with library and server mode examples ([`9d08047`](https://github.com/agentplexus/mcpkit/commit/9d08047))
- Feature comparison matrix (library vs server mode) ([`9d08047`](https://github.com/agentplexus/mcpkit/commit/9d08047))
- MCP feature adoption guidance ([`9d08047`](https://github.com/agentplexus/mcpkit/commit/9d08047))
- Full API reference documentation ([`9d08047`](https://github.com/agentplexus/mcpkit/commit/9d08047))

[unreleased]: https://github.com/agentplexus/mcpkit/compare/v0.3.1...HEAD
[v0.3.1]: https://github.com/agentplexus/mcpkit/compare/v0.3.0...v0.3.1
[v0.3.0]: https://github.com/agentplexus/mcpkit/compare/v0.2.0...v0.3.0
[v0.2.0]: https://github.com/agentplexus/mcpkit/compare/v0.1.0...v0.2.0
[v0.1.0]: https://github.com/agentplexus/mcpkit/releases/tag/v0.1.0
